"use strict";(self.webpackChunkmongodb_express=self.webpackChunkmongodb_express||[]).push([[651],{1651:function(t,e,n){n.r(e);var i=n(1413),o=n(5671),s=n(3144),a=n(136),l=n(516),r=n(7313),c=n(7861),d=n(1818),u=n.n(d),m=n(6417),h=function(t){(0,a.Z)(n,t);var e=(0,l.Z)(n);function n(){var t;(0,o.Z)(this,n);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return(t=e.call.apply(e,[this].concat(s))).state={isAdmin:!1,Msg:!1},t}return(0,s.Z)(n,[{key:"componentDidMount",value:function(){console.log("mounted postVideo"),this.verifyAdmin()}},{key:"verifyAdmin",value:function(){var t,e="";document.cookie.split(";").find((function(t){return t.startsWith("jwt=")}))&&(t=document.cookie.split(";").find((function(t){return t.startsWith("jwt=")})).split("=")[1],e=(0,c.Z)(t),this.setState({isAdmin:e.isAdmin}))}},{key:"handleClickPostVid",value:function(t){t.preventDefault();var e=new FormData(document.querySelector("#form")),n=e.get("vidTitle"),i=e.get("aboutVid"),o=e.get("vidSrc"),s=e.get("thumbnailSrc");u().post("/postvideo",{vidTitle:n,aboutVid:i,vidSrc:o,thumbnailSrc:s}).then((function(t){console.log(t.headers),200!==t.status&&(window.location.href="/jwtauth")})).catch((function(t){return console.log(t)}))}},{key:"handleClickPostImage",value:function(t){var e=this;t.preventDefault();var n=new FormData(document.querySelector("#form2")).get("thumbnail");u().post("/postimg",n,{headers:{"content-type":"multipart/form-data"}}).then((function(t){e.setState((0,i.Z)((0,i.Z)({},e.state),{},{Msg:t}))})).then(console.log(this.state.Msg))}},{key:"render",value:function(){var t=this;return(0,m.jsx)("div",{children:this.state.isAdmin?(0,m.jsxs)("div",{children:[(0,m.jsx)("p",{children:"allowed to post vids"}),(0,m.jsxs)("div",{children:[(0,m.jsxs)("form",{id:"form",children:[(0,m.jsxs)("label",{children:["Video Title",(0,m.jsx)("input",{className:"text-black",name:"vidTitle"})]}),(0,m.jsxs)("label",{children:["About video",(0,m.jsx)("input",{className:"text-black",name:"aboutVid"})]}),(0,m.jsxs)("label",{children:["Video Source",(0,m.jsx)("input",{className:"text-black",name:"vidSrc"})]}),(0,m.jsxs)("label",{children:["Thumbnail Source",(0,m.jsx)("input",{className:"text-black",name:"thumbnailSrc"})]}),(0,m.jsx)("button",{onClick:function(e){t.handleClickPostVid(e)},children:"click me"})]}),(0,m.jsxs)("form",{method:"POST",action:"/postimg",target:"_blank",id:"form2",encType:"multipart/form-data",children:[(0,m.jsxs)("label",{children:["Thumbnail",(0,m.jsx)("input",{name:"thumbnail",type:"file",formEncType:"multipart/form-data"})]}),(0,m.jsx)("button",{type:"submit",children:"SUBMIT CLASSICAL"})]})]})]}):(0,m.jsx)("p",{children:"not allowed to post vids"})})}}]),n}(r.Component);e.default=h}}]);